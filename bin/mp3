#!/usr/bin/env ruby

# simple CLI tool to bookmark streams I listen to

STREAMS = {
  fluxfm: 'http://streams.fluxfm.de/live/mp3-128/fluxfm.de_webplayer/',
  kpoo: 'http://amber.streamguys.com:5220/xstream',
  kqed: 'http://streams2.kqed.org/kqedradio',
  npr: 'http://streams.kqed.org/kqedradio',
  plants: 'http://69.253.126.229:8000/listen',
  reboot: 'http://87.118.122.220:8002/stream',
  wvum: 'http://www.wvum.org:9010/stream/',
}

if ARGV.size == 1
  url = STREAMS[ARGV[0].to_sym]
  system 'mplayer', url, out: $stdout, err: :out
else
  $stderr.puts 'usage: mp3 (stream)'
  $stderr.puts 'available streams: '
  STREAMS.keys.each do |stream|
    $stderr.puts "- #{stream}"
  end
end
